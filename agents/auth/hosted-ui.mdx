---
title: "Hosted UI"
description: "The simplest way to get authenticated browser sessions"
---

Collect credentials via Kernel's hosted page, then use the authenticated session in your automations. This is the recommended approach for most applications.

Use the Hosted UI when:
- You need users to provide their credentials
- You want the simplest integration with minimal code
- You want Kernel to handle 2FA and multi-step login flows

## Getting started

### 1. Create an Auth Agent

An Auth Agent represents a login session for a specific website and profile.

```typescript
const agent = await kernel.agents.auth.create({
  domain: 'linkedin.com',
  profile_name: 'linkedin-profile',
});
```

### 2. Start Authentication

Create an invocation to get the hosted login URL.

```typescript
const invocation = await kernel.agents.auth.invocations.create({
  auth_agent_id: agent.id,
});
```

To enable automatic re-authentication when sessions expire, add `save_credential_as`:

```typescript
const invocation = await kernel.agents.auth.invocations.create({
  auth_agent_id: agent.id,
  save_credential_as: 'my-saved-creds',
});
```

### 3. Collect Credentials

Send the user to the hosted login page:

```typescript
window.location.href = invocation.hosted_url;
```

The user will:
1. See the login page for the target website
2. Enter their credentials
3. Complete 2FA if needed

### 4. Poll for Completion

On your backend, poll until authentication completes:

```typescript
let state = await kernel.agents.auth.invocations.retrieve(invocation.invocation_id);

while (state.status === 'IN_PROGRESS') {
  await new Promise(r => setTimeout(r, 2000));
  state = await kernel.agents.auth.invocations.retrieve(invocation.invocation_id);
}

if (state.status === 'SUCCESS') {
  console.log('Authentication successful!');
}
```

<Info>
Poll every 2 seconds. The session expires after 5 minutes if not completed.
</Info>

### 5. Use the Profile

Create browsers with the profileâ€”they're already logged in:

```typescript
const browser = await kernel.browsers.create({
  profile: { name: 'linkedin-profile' },
  stealth: true,
});

// Connect with Playwright
import { chromium } from 'playwright';
const playwrightBrowser = await chromium.connectOverCDP(browser.cdp_ws_url);
const page = playwrightBrowser.contexts()[0].pages()[0];

// Navigate - already logged in!
await page.goto('https://linkedin.com/feed');
```

<Info>
Use `stealth: true` when creating browsers for authenticated sessions.
</Info>


## Complete Example

<CodeGroup>
```typescript TypeScript
import Kernel from '@onkernel/sdk';

const kernel = new Kernel();

// Create auth agent
const agent = await kernel.agents.auth.create({
  domain: 'doordash.com',
  profile_name: 'doordash-user-123',
});

// Start authentication
const invocation = await kernel.agents.auth.invocations.create({
  auth_agent_id: agent.id,
});

// Send user to hosted page
console.log('Login URL:', invocation.hosted_url);

// Poll for completion
let state = await kernel.agents.auth.invocations.retrieve(invocation.invocation_id);
while (state.status === 'IN_PROGRESS') {
  await new Promise(r => setTimeout(r, 2000));
  state = await kernel.agents.auth.invocations.retrieve(invocation.invocation_id);
}

if (state.status === 'SUCCESS') {
  // Use the profile
  const browser = await kernel.browsers.create({
    profile: { name: 'doordash-user-123' },
    stealth: true,
  });

  console.log('Browser ready:', browser.cdp_ws_url);
}
```

```python Python
from kernel import Kernel
import asyncio

kernel = Kernel()

# Create auth agent
agent = await kernel.agents.auth.create(
    domain="doordash.com",
    profile_name="doordash-user-123",
)

# Start authentication
invocation = await kernel.agents.auth.invocations.create(
    auth_agent_id=agent.id,
)

# Send user to hosted page
print(f"Login URL: {invocation.hosted_url}")

# Poll for completion
state = await kernel.agents.auth.invocations.retrieve(invocation.invocation_id)
while state.status == "IN_PROGRESS":
    await asyncio.sleep(2)
    state = await kernel.agents.auth.invocations.retrieve(invocation.invocation_id)

if state.status == "SUCCESS":
    # Use the profile
    browser = await kernel.browsers.create(
        profile={"name": "doordash-user-123"},
        stealth=True,
    )

    print(f"Browser ready: {browser.cdp_ws_url}")
```
</CodeGroup>
